<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rock, Paper, Scissors</title>
    </head>
    <body>
        <script>
            console.log('Hello, welcome to ROCK, PAPER, SCISSORS');
            function getComputerChoice () {
                function randomNumber3 () {
                    return Math.floor(Math.random() * 3)
                }
                if (randomNumber3() === 1) {
                    return 'ROCK';
                } else if (randomNumber3() === 2) {
                    return 'PAPER';
                } else {
                    return 'SCISSORS';
                }
            }
            function getUserChoice() {
                var userInput = prompt('Please input rock, paper or scissors').toUpperCase();
                if (userInput === 'ROCK' || userInput === 'PAPER' || userInput === 'SCISSORS') {
                    return userInput;
                } else {
                    alert('Error: please input rock, paper or scissors');
                    return getUserChoice();
                }
            }
            function determineWinner(userChoice, computerChoice) {
                if (userChoice === computerChoice) {
                    return 'It\'s a draw!';
                }
                if (userChoice === 'ROCK') {
                    if (computerChoice === 'SCISSORS') {
                        return 'ROCK beats SCISSORS: you win!';
                    } else {
                        return 'ROCK is beaten by PAPER, you lose!';
                    }
                }
                if (userChoice === 'PAPER') {
                    if (computerChoice === 'ROCK') {
                        return 'PAPER beats ROCK: you win!';
                    } else {
                        return 'PAPER is beaten by SCISSORS, you lose!';
                    }
                }
                if (userChoice === 'SCISSORS') {
                    if (computerChoice === 'PAPER') {
                        return 'SCISSORS beats PAPER: you win!';
                    } else {
                        return 'SCISSORS is beaten by ROCK, you lose!';
                    }
                }
            }
            function playRound () {
                computerChoice = getComputerChoice();
                userChoice = getUserChoice();
                console.log(`The computer has chosen: ${computerChoice}`)
                console.log(`You have chosen: ${userChoice}`)
                console.log(`${determineWinner(userChoice, computerChoice)}`)
            }
            function tallyUserScore(result) {
                if (result === 'ROCK beats SCISSORS: you win!' ||
                    result === `PAPER beats ROCK: you win!` ||
                    result === `SCISSORS beats PAPER: you win!`) {
                    return 1;
                } else if (result === 'ROCK is beaten by PAPER, you lose!' ||
                    result === `PAPER is beaten by SCISSORS, you lose!` ||
                    result === `SCISSORS is beaten by ROCK, you lose!`) {
                    return 0;
                } else {
                    return 0;
                }
            }
            function tallyComputerScore(result) {
                if (result === 'ROCK beats SCISSORS: you win!' ||
                    result === `PAPER beats ROCK: you win!` ||
                    result === `SCISSORS beats PAPER: you win!`) {
                    return 0;
                } else if (result === 'ROCK is beaten by PAPER, you lose!' ||
                    result === `PAPER is beaten by SCISSORS, you lose!` ||
                    result === `SCISSORS is beaten by ROCK, you lose!`) {
                    return 1;
                } else {
                    return 0;
                }
            }
            playRound();
            let result = determineWinner(userChoice, computerChoice);
            console.log(`User: ${tallyUserScore(result)}`);
            console.log(`Computer: ${tallyComputerScore(result)}`);
            playRound();
            result = determineWinner(userChoice, computerChoice);
            console.log(`User: ${tallyUserScore(result)}`);
            console.log(`Computer: ${tallyComputerScore(result)}`);
            playRound();
            result = determineWinner(userChoice, computerChoice);
            console.log(`User: ${tallyUserScore(result)}`);
            console.log(`Computer: ${tallyComputerScore(result)}`);
        </script>
    </body>
</html>